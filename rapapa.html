<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso Restringido</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000;
        }
        /* oculto por defecto; se mostrará solo si el peso > 100 */
        .spinner {
            display: none; /* Importante: oculto hasta que se active */
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            background: #111;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        /* cuando está activo, muestra y anima */
        .spinner.active {
            display: flex;
            opacity: 1;
        }

        /* la imagen rota sobre su propio eje (centro) */
        .spinner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform-origin: 50% 50%;
            animation: spin-img 2s linear infinite;
            display: block;
        }

        @keyframes spin-img {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- modal que pide el peso (reemplaza prompt). El click en Enviar es gesto de usuario -->
    <div id="weight-modal" style="position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);">
        <form id="weight-form" style="background:#111;padding:1.5rem;border-radius:8px;color:#fff;min-width:280px;">
            <h2 style="margin:0 0 0.5rem 0;font-size:1.1rem">Introduce tu peso (kg)</h2>
            <input id="weight-input" type="number" step="0.1" placeholder="Ej. 85.5" style="width:100%;padding:0.5rem;border-radius:4px;border:1px solid #333;background:#000;color:#fff;margin-bottom:0.75rem;" required />
            <div style="display:flex;gap:0.5rem;justify-content:flex-end;">
                <button type="submit" style="padding:0.45rem 0.8rem;border-radius:4px;border:none;background:#3498db;color:#fff;cursor:pointer">Enviar</button>
            </div>
            <p style="margin:0.75rem 0 0 0;color:#ccc;font-size:0.9rem">Si el peso es mayor de 100 kg verás una imagen girando y se reproducirá música.</p>
        </form>
    </div>

    <div class="spinner" aria-hidden="true"><img src="XD.jpg" alt="Imagen girando"></div>

    <!-- elemento de audio: coloca 'musica.mp3' en la misma carpeta o cambia el src -->
    <audio id="spin-audio" src="Rapapa.mp3" preload="auto" loop></audio>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var modal = document.getElementById('weight-modal');
            var form = document.getElementById('weight-form');
            var input = document.getElementById('weight-input');
            var spinner = document.querySelector('.spinner');
            var audio = document.getElementById('spin-audio');

            form.addEventListener('submit', function (e) {
                e.preventDefault();
                var respuesta = input.value;
                // aceptar tanto coma como punto decimal si el navegador envía string
                var peso = parseFloat(String(respuesta).replace(',', '.'));
                // ocultar modal (acción de usuario realizada)
                modal.style.display = 'none';

                if (!isNaN(peso) && peso > 100) {
                    // Añadir clase active para mostrar con transición
                    spinner.classList.add('active');
                    // Como el usuario ha pulsado el botón, la reproducción con sonido suele permitirse
                    if (audio) {
                        audio.play().catch(function () {
                            // si por algún motivo falla, mostramos botón para activar
                            var btn = document.createElement('button');
                            btn.textContent = 'Pulsa para activar la música';
                            btn.style.marginTop = '1rem';
                            btn.style.padding = '0.5rem 1rem';
                            btn.style.fontSize = '1rem';
                            btn.onclick = function () { audio.play(); btn.remove(); };
                            document.body.appendChild(btn);
                        });
                    }
                } else {
                    var msg = document.createElement('p');
                    msg.textContent = 'Peso menor o igual a 100 — no se muestra la imagen.';
                    msg.style.color = '#fff';
                    msg.style.marginTop = '1rem';
                    document.body.appendChild(msg);
                }
            });
        });
    </script>
</body>
</html>